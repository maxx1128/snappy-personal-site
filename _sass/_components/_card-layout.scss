.card-layout {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.card {
  margin: spacing(2) 0 spacing();

  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  box-shadow: inset 0 0 0 1000px rgba(tint(color(primary, light), 55%), 0.88), container(box-shadow, 2);
}

.card__body {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
}

.card__header {
  font-size: type(font-size, h4);
}

.card__banner {
  display: none;
  margin: auto (spacing() * -1);
  min-height: 8rem;
  max-height: 16rem;
  flex: 1 1 auto;

  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

@include larger-than(lg) {
  .card {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .card__tags {
    margin-top: auto;
  }
}

@supports (display: grid) {
  .card-layout {
    display: grid;
    grid-gap: spacing();
    grid-template-columns: 1fr;
    grid-auto-flow: dense;
  }

  .card {
    margin: 0;
    grid-column: span 1;
  }

  .card__banner {
    display: block;
  }

  .card__banner + .card__excerpt {
    margin-top: spacing();
  }

  @include larger-than(lg) {
    .card-layout {
      grid-template-columns: repeat(2, 1fr);
    }

    .card:nth-of-type(5n+1) {
      grid-column: span 2;
    }
  }

  @include larger-than(xl) {
    .card-layout {
      grid-template-columns: repeat(3, 1fr);
    }

    .card {
      &:nth-of-type(5n+3),
      &:nth-of-type(5n+4) {
        .card__banner {
          display: none;
        }

        .card__banner + .card__excerpt {
          margin-top: 0;
        }
      }

      &:nth-of-type(5n+1) {
        grid-column: span 3;

        .card__banner {
          min-height: 12rem;
        }
      }

      &:nth-of-type(5n+2),
      &:nth-of-type(5n+5) {
        grid-column: span 2;
      }
    }
  }

  @include larger-than(xxl) {
    .card-layout {
      max-width: breakpoint(xl);
    }
  }
}
